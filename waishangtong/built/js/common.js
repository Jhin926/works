var _pathArr=(window.location+"").split("/"),Base={url:_pathArr[0]+"//"+_pathArr[2],builtUrl:_pathArr[0]+"//"+_pathArr[2]+"/html",adminUrl:_pathArr[0]+"//"+_pathArr[2]+"/html/admin",jsUrl:_pathArr[0]+"//"+_pathArr[2]+"/js/app",libUrl:_pathArr[0]+"//"+_pathArr[2]+"/js/lib",reqUrl:_pathArr[0]+"//"+_pathArr[2]+"/service/invoke.jhtml",sitUrl:"http://console.waishangtongmail.com"};require.config({paths:{jquery:Base.libUrl+"/jquery-1.10.2.min",angular:Base.libUrl+"/angular.min",angularAnimate:Base.libUrl+"/angular-animate",bootstrap:Base.libUrl+"/bootstrap/js/bootstrap.min",datetimepicker:Base.libUrl+"/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min",datetimepickerCN:Base.libUrl+"/bootstrap-datetimepicker/js/bootstrap-datetimepicker.zh-cn",uniform:Base.libUrl+"/uniform/jquery.uniform.min",validationLang:Base.libUrl+"/jquery-validation/messages_zh.min",slimScroll:Base.libUrl+"/jquery-slimscroll/jquery.slimscroll.min",ztree:Base.libUrl+"/zTree_v3/js/jquery.ztree.all-3.5.min",jqform:Base.libUrl+"/jquery.form",blockUI:Base.libUrl+"/jquery.blockui.min",colorpicker:Base.libUrl+"/bootstrap-colorpicker/js/bootstrap-colorpicker",ueditorconfig:Base.libUrl+"/UEditor/ueditor.config",ueditor:Base.libUrl+"/UEditor/ueditor.all.min",ueditorLang:Base.libUrl+"/UEditor/lang/zh-cn/zh-cn",ZeroClipboard:Base.libUrl+"/UEditor/third-party/zeroclipboard/ZeroClipboard.min",cookiehandle:Base.jsUrl+"/cookiehandle",validate:Base.libUrl+"/jquery-validation/jquery.validate.min",maintab:Base.jsUrl+"/maintab",setpassword:Base.jsUrl+"/setpassword",rsa:Base.jsUrl+"/rsa",base64:Base.jsUrl+"/base64",jsbn:Base.jsUrl+"/jsbn",rng:Base.jsUrl+"/rng",prng4:Base.jsUrl+"/prng4",jqueryUI:Base.libUrl+"/jquery-ui.min",evol:Base.libUrl+"/evol-colorpicker/evol-colorpicker.min",jqprint:Base.libUrl+"/jquery.jqprint-0.3",calendar:Base.libUrl+"/fullcalendar.min",selectPick:Base.libUrl+"/select-pick/selectpick",swfobject:Base.libUrl+"/message/swfobject",web_socket:Base.libUrl+"/message/web_socket",cityselect:Base.libUrl+"/city/jquery.cityselect",app:Base.jsUrl+"/app",category:"category",countries:"countries"},shim:{bootstrap:["jquery"],datetimepickerCN:["datetimepicker"],uniform:["jquery"],slimScroll:["jquery"],ztree:["jquery"],jqform:["jquery"],blockUI:["jquery"],colorpicker:["jquery"],setpassword:["jquery","validationLang","rsa"],gridly:["jquery"],rng:["prng4"],rsa:["base64","jsbn","rng"],ueditorLang:["ueditor"],ueditor:["ueditorconfig"],jqueryUI:["jquery"],evol:["jquery","jqueryUI"],jqprint:["jquery"],calendar:["jquery"],selectPick:["jquery"],cityselect:["jquery"],angularAnimate:["angular"],angular:{exports:"angular"}}}),require(["uniform"],function(){$(":radio, :checkbox").uniform()}),require(["jquery","blockUI"],function(){function e(e){return e=e.toString(),e.length<2&&(e="0"+e.toString()),e}$(document).on("keydown",function(e){116==e.keyCode&&($.EventFn(e),self!=top?window.location.reload():window.frames.main&&window.frames.main.location.reload())}),$.unLogin=function(e,t,a){"200005"==e.code||"200006"==e.code?top.location.href="/html/login.html":(t=void 0!=t?t:"",a=void 0!=a?a:"",$.Alert(t+e.message+a))},$(".box-inputs").on("input","#inputQuick",function(e){var t=$(this).val();t.length>0?$("#c-search-btn").removeClass("s-updownBg s-find").addClass("clear-icon-email2"):$("#c-search-btn").addClass("s-updownBg s-find").removeClass("clear-icon-email2")}),$(".box-inputs").on("click",".clear-icon-email2",function(e){$.EventFn(e),$("#inputQuick").val(""),$("#c-search-btn").addClass("s-updownBg s-find").removeClass("clear-icon-email2")}),$.BlockUI=function(e,t){var e=void 0!=e?jQuery(e):jQuery("body");e.height()<=400&&(t=!0),e.block({message:'<div class="blockui-img"></div>',centerY:void 0==t||t,css:{top:"10%",border:"none",padding:"2px",backgroundColor:"none"},overlayCSS:{backgroundColor:"#000",opacity:.15,cursor:"wait"}})},$.UnblockUI=function(e,t){var e=void 0!=e?jQuery(e):jQuery("body");jQuery(e).unblock({onUnblock:function(){jQuery(e).css("position",""),jQuery(e).css("zoom","")}})},$.AjaxFun=function(e){var t={url:Base.sitUrl+"/service/invoke.jhtml",type:"POST",dataType:"json",beforeSend:function(e){$.BlockUI()},complete:function(e,t){$.UnblockUI()}},a=$.extend({},t,e);$.ajax(a)},$.DestroyPopInPop=function(){$(parent.document.body).find("#sPop").animate({width:0},500,function(){$(parent.document.body).find("#mainTab, #iframeWrap").empty()})},$.EventFn=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()},$.modalsFn=function(e,t){var a=e;a.hasClass("active")||(t?a.addClass("active").css("left",t.position().left).siblings(".modals").removeClass("active"):a.addClass("active").siblings(".modals").removeClass("active"))},$.GetLength=function(e){return e.replace(/[^\x00-\xff]/g,"aa").length},$.autoAddEllipsis=function(e,t){for(var a="",r=0,i=0;i<e.length;i++)r+=e.charAt(i).charCodeAt(0)>128?2:1,r>t?a=e.substring(0,i-1)+"...":r==t?a=e.substring(0,i)+"...":i==e.length-1&&(a=e);return a},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1},Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},Array.prototype.unique=function(){for(var e={},t=[],a=0;a<this.length;a++)e[this[a]]||(e[this[a]]=!0,t.push(this[a]));return t},$.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?window.decodeURI(a[2]):null},$.GetCurrentPermission=function(){$.AjaxFun({data:{_mt:"user_getCurrentPermission"},success:function(e){1==e.data.isgod?$("[data-permission]").show():0==e.data.isgod&&($("[data-permission]").hide(),$.each(e.data.permissions,function(e,t){$('[data-permission="'+t+'"]').show()}))}})},$.dateObj=function(e){var t={_setTimestamp:null,_getDates:function(){var e=t._setTimestamp;if(t._setTimestamp){e.length<13&&(e=t._setTimestamp+"000");var a=new Date(parseInt(e));return a}},_getYear:function(){return t._getDates().getFullYear()},_getMonth:function(){var e=t._getDates().getMonth()+1;return e<=9&&(e="0"+e),e},_getDate:function(){var e=t._getDates().getDate();return e<=9&&(e="0"+e),e},_getHour:function(){var e=t._getDates().getHours();return e<=9&&(e="0"+e),e},_getMinutes:function(){var e=t._getDates().getMinutes();return e<=9&&(e="0"+e),e},_getSeconds:function(){var e=t._getDates().getSeconds();return e<=9&&(e="0"+e),e},_getDatetime:function(){return t._getYear()+"-"+t._getMonth()+"-"+t._getDate()+" "+t._getHour()+":"+t._getMinutes()},_getDatetime2:function(){return t._getMonth()+"月"+t._getDate()+"日 "+t._getHour()+":"+t._getMinutes()},_getDatetime3:function(){return t._getYear()+"-"+t._getMonth()+"-"+t._getDate()},_getDatetime4:function(){return t._getYear()+"-"+t._getMonth()+"-"+t._getDate()+" "+t._getHour()+":"+t._getMinutes()+":"+t._getSeconds()}};return t._setTimestamp=e,t},$.fn.Colorpicker=function(e){var t={current:"#CCCCCC",colors:["#000000","#434343","#666666","#999999","#B7B7B7","#CCCCCC","#D9D9D9","#EFEFEF","#F3F3F3","#FFFFFF","#980000","#FF0000","#FF9900","#FFFF00","#01FF00","#01FFFF","#4A86E8","#0000FF","#9900FF","#FF00FF","#e7b8b0","#F4CCCC","#fbe5cd","#fff2cd","#d8ead2","#d8ead2","#c9daf8","#cfe2f3","#dad2e9","#ebd1dc","#dd7e6a","#e99998","#f9ca9c","#ffe59a","#b6d7a8","#a2c3c8","#a4c2f4","#9fc5e9","#b4a7d5","#d6a6be","#cc4025","#e06665","#f6b26b","#fed966","#92c47d","#76a5af","#6d9eeb","#6fa8dd","#8d7cc2","#c17ba0","#a61c00","#cc0001","#e69137","#f1c332","#69a84f","#46818f","#3c78d8","#3e85c7","#674fa7","#a64d79","#85200c","#990100","#b45f05","#bf9100","#37761d","#144f5d","#1055cc","#0c5395","#351d75","#741b47","#5b0f01","#660000","#773f04","#7e6000","#274f13","#0c343c","#1c4587","#073863","#20124d","#4c1131"]},a=$.extend({},t,e),r='<div id="colorPicker" class="colorpicker"></div>';$("#colorPicker").length<=0&&$("body").append(r);var i=$("#colorPicker");return i.empty(),$.each(a.colors,function(e,t){i.append('<a title="'+t+'" style="background-color:'+t+'" href="#" data-color="'+t+'"></a>')}),this.each(function(){var e=$(this),t=e.find("i"),r=parseInt(t.data("index"));t.css("backgroundColor",a.current).attr("data-index",a.current),$("body").on("click",function(){i.hide()}),$(this).on("click",function(e){var t=$(this),a=$(this).height(),o=($(this).width(),$(this).offset().left),n=$(this).offset().top+a+8;return i.children("a").eq(r).addClass("current").siblings().removeClass("current"),i.show().css({top:n,left:o}),i.off().on("click","a",function(e){e.preventDefault();var a=$(this).index(),r=$(this).data("color");t.children("i").css("backgroundColor",r).data("index",a)}),!1})})},$.calcTime=function(t,a,r){var i=new Date(t).getTime(),o=i-60*a*6e4,n=new Date(o+60*r*6e4),s=n.getFullYear(),c=e(n.getMonth()+1),l=e(n.getDate()),d=e(n.getHours()),u=e(n.getMinutes()),h=e(n.getSeconds());return s+"-"+c+"-"+l+"   "+d+":"+u+":"+h}}),require(["jquery","bootstrap"],function(){function e(){var e=$(".logo").outerHeight()+$("#sideMenu").outerHeight()+$("#sideFooter").outerHeight(),t=$(".i-sidebar").outerHeight();e>=t?$(".side-footer").css("position","relative"):$(".side-footer").css("position","absolute")}$.getUser=function(){var e=localStorage.getItem("__userInfo"),t=-1,a="匿名",r=-1;return e&&(a=e.substr(0,e.indexOf(";")),t=parseInt(e.substr(e.indexOf(";")+1)),r=parseInt(e.substr(e.lastIndexOf(";")+1))),{id:t,name:a,master:r}},$(".page-content").height($(".i-content-wrapper").height()),$("#sPop").height($(".page-content").height()),$(".page-left").height($(".i-content-wrapper").height()),e(),$(window).resize(function(){e(),$(".page-content").height($(".i-content-wrapper").height()),$("#sPop").height($(".page-content").height()),$(".page-left").height($(".i-content-wrapper").height()),"0px"!=$(".m_batch").css("left")&&$(".m_batch").css("left","-100%"),$(".pop-left").height("100%")}),$(".page-content").scroll(function(){var e=$(".i-content-wrapper").height(),t=$(".page-right").height(),a=0,a=t-e>0?t:e;$(".page-left").height(a)}),$.Page=function(e){if(!e._class)return!1;var t=$(e._class),a=e.allNum||5,r=e.nowNum||1,i="",o=e.callback||function(){};if(t.off("click",">a"),e.allNum<=0)return t.empty(),!1;if(r>=4&&a>=6&&(i='<a href="javascript:;" data-page="1">首页</a>'),r>=2&&(i+='<a href="javascript:;" data-page="'+(r-1)+'">&lt;</a>'),a<=5)for(var n=1;n<=a;n++)i+=r==n?'<a href="javascript:;" class="active">'+n+"</a>":'<a href="javascript:;" data-page="'+n+'">'+n+"</a>";else{for(var n=1;n<=5;n++)i+=1==r||2==r?r==n?'<a href="javascript:;" class="active">'+n+"</a>":'<a href="javascript:;" data-page="'+n+'">'+n+"</a>":a-r==0||a-r==1?a-r==0&&5==n?'<a href="javascript:;" class="active">'+(a-5+n)+"</a>":a-r==1&&4==n?'<a href="javascript:;" class="active">'+(a-5+n)+"</a>":'<a href="javascript:;" data-page="'+(a-5+n)+'">'+(a-5+n)+"</a>":3==n?'<a href="javascript:;" class="active">'+(r-3+n)+"</a>":'<a href="javascript:;" data-page="'+(r-3+n)+'">'+(r-3+n)+"</a>";a-r>1&&(i+='<a href="javascript:;" data-page="'+(parseInt(r)+1)+'">&gt;</a>'),a-r>=3&&a>=6&&(i+='<a href="javascript:;" data-page="'+a+'">尾页</a>')}var s=2;2==s&&(i+='<input type="text" /><button type="button">确定</button>'),i+='<span style="margin:0 10px;">共'+(e.total||"")+"条记录</span>",t.empty(),t.append(i),t.on("click",">button",function(r){var i=parseInt(t.find("input").val());return!!i&&(!(i>e.allNum)&&($.Page({_class:e._class,nowNum:i,allNum:e.allNum,callback:o}),void o(i,a)))}),t.on("click",">a",function(t){if($(this).hasClass("active"))return!1;var r=$(this).attr("data-page");$.Page({_class:e._class,nowNum:r,allNum:e.allNum,callback:o}),o(r,a)})},$.errorsFn=function(e,t){var a=!0,r='<ddxi8lo xiv class="errors">                    <span></span>                </div>';return null==e.val()||""==$.trim(e.val())||e.val()==-1?(e.hasClass("error")||(e.addClass("error"),0==e.next(".errors").length&&e.after(r),e.next(".errors").addClass("active"),e.next(".errors").children("span").text(t)),a=!1):(e.removeClass("error"),e.next(".errors").removeClass("active")),a},$.cutImage=function(e,t,a){var r=new Image;r.src=e.src,r.width>t&&r.height>a?r.width>r.height?e.height=a:e.width=t:e.style.cssText="position: absolute;top: 50%;margin-top:"+-(e.height/2)+"px;left:50%;margin-left:"+-(e.width/2)+"px"},$(".table").on("click","td input:checkbox",function(){var e=$(this).parent(),t=$(this).closest("tr");$(this).prop("checked")?(t.addClass("active"),e.addClass("checked")):(t.removeClass("active"),e.removeClass("checked"))}).on("click","th input:checkbox",function(e){var t=$(this).closest("table").find("tbody tr"),a=$(this).closest("table").find("tr .checker span"),r=$(this).closest("table").find("tbody :checkbox");$(this).prop("checked")?(t.addClass("active"),a.addClass("checked"),r.prop("checked",!0)):(t.removeClass("active"),a.removeClass("checked"),r.prop("checked",!1))}),$("#s_tack").on("click",function(e){$(this).addClass("s-thumbs").removeClass("s-unthumbs"),$(".page-left").stop().animate({"margin-left":-$(".page-left").width()-15},500),$(".page-right").animate({width:"99.4%"},500,function(){$(".r-titles").show()})}),$(".page-right>.page-title>.titles>.i_task").on("click",function(e){$(".page-left").length>0&&($("#s_tack").removeClass("s-thumbs").addClass("s-unthumbs"),$(".page-left").stop().animate({"margin-left":0},500),$(".page-right").animate({width:"87%"},500,function(){$(".r-titles").hide()}))}),$(".i-content-wrapper,.mid,.page-content").bind("scroll",function(){var e=$(".i-content-wrapper").scrollTop(),t=$(".page-content").scrollTop(),a=$(".mid").scrollTop();e>50||a>50||t>50?parent.$.disNone():parent.$.disBlock()}),$("#btn-filter").on("click",function(){$(this).hasClass("active")?($(this).removeClass("active"),$("#filter").hide()):($(this).addClass("active"),$("#filter").show())}),$("#batchClose").on("click",function(){$(".m_batch").stop().animate({left:"-100%"},function(){$(".m_batch").removeClass("active")})}),$(".page_info>table>thead").delegate("#all","click",function(){$(this).attr("checked")?($(this).parent().removeClass("checked"),$("input[name=batch]").each(function(){$(this).attr("checked",!1)}),$(".m_batch").stop().animate({left:"-100%"},function(){$(".m_batch").removeClass("active")})):($(this).parent().addClass("checked"),$("input[name=batch]").each(function(){$(this).attr("checked",!0)}),$(".m_batch").addClass("active").stop().animate({left:0})),$(this).attr("checked",!$(this).attr("checked"))}),$(".page_info>table>tbody").delegate("input[name=batch]","click",function(e){var t=e||window.event;t.stopPropagation(),$(".modals").removeClass("active"),$(this).attr("checked",!$(this).attr("checked")),$(this).attr("checked")?($(this).parent().addClass("checked"),$(this).closest("tr").addClass("active")):($(this).parent().removeClass("checked"),$(this).closest("tr").removeClass("active")),0==$("input[name=batch]:checked").length?($(".m_batch").stop().animate({left:"-100%"},function(){$(this).removeClass("active")}),$("#all").attr("checked",!1).closest("span").removeClass("checked")):$(".m_batch").addClass("active").stop().animate({left:0}),$("input[name=batch]:checked").length==$("input[name=batch]").length?$("#all").attr("checked",!0).closest("span").addClass("checked"):$("#all").attr("checked",!1).closest("span").removeClass("checked")}),$.filterObj={list:[],total:0,type:0},$.pageObj={currentPage:1,pageSize:8},$(".mclose").on("click",function(){$(this).closest(".modals").removeClass("active")}),jQuery.Alert=function(e,t,a){function r(){i.append(s);var e=window.setInterval(function(){c=$("#alert_Modal"),c.length>0&&(c.modal({backdrop:"static",keyboard:!1}),c.on("hidden.bs.modal",function(e){c.remove(),a.call(this)}),c.modal("show"),clearInterval(e))},50)}var i=$(document.body),o="确定要关闭吗？ ",n="",a=$.isFunction(a)&&a?a:$.noop;e&&(o=e),t&&(n="<img src='"+t+"' />");var s='<div id="alert_Modal" class="modal fade" aria-hidden="true" role="basic" tabindex="-1" style="display: none;z-index:100001!important;"><div class="modal-dialog modal-dialog-marTop" style="width: 300px;margin-top:180px;"><div class="modal-content"><div class="modal-header">    <button class="close" aria-hidden="true" onclick="$.Alert.destoryAlert()" type="button"></button><h4 class="modal-title" style="text-align:left;">提示</h4></div><div class="modal-body"> '+n+o+'</div><div class="modal-footer"><button class="btn btn-primary" type="button" onclick="$.Alert.destoryAlert()">确定</button></div></div></div></div>',c=[];r()},jQuery.Alert.destoryAlert=function(){$("#alert_Modal").modal("hide")},jQuery.Confirm=function(e,t,a){function r(){i.append(s),c=$("#confirm_Modal"),c.length>0&&(c.modal({backdrop:"static",keyboard:!1}),c.on("hidden.bs.modal",function(e){c.remove()}),c.modal("show"),$("#destoryDopConfirmButton").bind("click",function(){$.Confirm.destoryConfirm()}),$("#okDopConfirmButton").bind("click",function(){a()}))}var i=$(document.body),o="确定要操作吗？ ",n="",a=$.isFunction(a)&&a?a:$.noop;e&&(o=e),t&&(n="<img src='"+t+"' />");var s='<div id="confirm_Modal" class="modal fade" aria-hidden="true" role="basic" tabindex="-1" style="display: none;z-index:100001!important;"><div class="modal-dialog" style="width: 300px;margin-top:140px;"><div class="modal-content"><div class="modal-header">  <h4 class="modal-title" style="text-align:left;">提示</h4></div><div class="modal-body">'+n+o+'</div><div class="modal-footer"><button class="btn btn-primary" data-dismiss="modal" id="okDopConfirmButton" type="button">确定</button><button class="btn default" type="button" id="destoryDopConfirmButton">关闭</button></div></div></div></div>',c=[];r()},jQuery.Confirm.destoryConfirm=function(){$("#confirm_Modal").modal("hide")},jQuery.Err=function(e,t){function a(){r.append(n);var e=window.setInterval(function(){s=$("#err_Modal"),s.length>0&&(s.modal({backdrop:"static",keyboard:!1}),s.on("hidden.bs.modal",function(e){s.remove()}),s.modal("show"),clearInterval(e))},50)}var r=$(document.body),i="关闭 ",o="";e&&(i=e),t&&(o="<img src='"+t+"' />");var n='<div id="err_Modal" class="modal fade" aria-hidden="true" role="basic" tabindex="-1" style="display: none;"><div class="modal-dialog" style="width: 400px;margin-top:180px;"><div class="modal-content"><div class="modal-header">   <button class="close" aria-hidden="true" onclick="jQuery.Err.destoryAlert()" type="button"></button><h4 class="modal-title" style="text-align:left;">异常信息</h4></div><div class="modal-body"> '+o+'<div  style="resize:none; border:1px solid #CCC;width:338px;margin-bottom:-20px; height:180px; overflow:auto">'+i+'</div></div><div class="modal-footer"><button class="btn blue" type="button" onclick="jQuery.Err.destoryAlert()">确定</button></div></div></div></div>',s=[];a()},jQuery.Err.destoryAlert=function(){$("#err_Modal").modal("hide")}});