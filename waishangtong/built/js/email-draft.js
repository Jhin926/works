require(["common"],function(){require(["maintab","blockUI"],function(t){function a(t){return null==t||void 0==t||""==t?"":t}function n(){$("#tableSort").find("input[name='batch']").each(function(){$(this).attr("checked",!1),$(this).parent("span").removeClass("checked")})}t.init(),$(".page_info").on("click","tbody>tr .btn-privateCust",function(t){$.EventFn(t);var a=$(this).closest("tr").find("input[name=batch]").attr("data-id"),n={id:a},e=$(this);$.ajax({url:Base.sitUrl+"/api/customer/v1/into/private/seas",type:"POST",dataType:"json",data:{data:JSON.stringify(n)},success:function(t){e.text("查看客户"),e.addClass("company-name").removeClass("btn-privateCust")}})}),$(".page_info").on("click","tbody>tr .btn-privateCont",function(t){$.EventFn(t);var a=$(this).closest("tr").find("input[name=batch]").attr("data-id"),n={id:a},e=$(this);$.ajax({url:Base.sitUrl+"/api/customer/contacts/v1/into/private/seas",type:"POST",dataType:"json",data:{data:JSON.stringify(n)},success:function(t){e.text("查看联系人"),e.addClass("btn-blockDetail").removeClass("btn-privateCont")}})}),$(".page_info").on("click","tbody>tr .xiegenjin",function(a){$.EventFn(a);var n=$(this).closest("tr").find("input[name=batch]").attr("data-cont");t.showTab(Base.url+"/html/pop-upload.html?id="+n+"&v="+window.ver,"写跟进")}),$(".page_info").on("click",".newtongxunlu",function(a){$.EventFn(a);var n=$(this).parents(".sender-condition").find(".sender-condition-name").text();t.showTab(Base.url+"/html/pop-statistics-new.html?name="+n+"&v="+window.ver,"新建通讯录")}),$(".page_info").on("click",".tongxunlu",function(a){$.EventFn(a);$(this).closest("tr").find("input[name=batch]").attr("data-id");t.showTab(Base.url+"/html/email-statistics.html?&v="+window.ver,"通讯录")}),$(".page_info").on("click","tbody>tr .fayoujian",function(t){$.EventFn(t);var a=$(this).closest("tr").find("input[name=batch]").attr("data-id");$("#mainIframe",parent.document).attr("src",Base.url+"/html/pop-email-newOut.html?showType=right&type=0&id="+a+"&v="+window.ver)}),$(".page_info").on("click","tbody>tr .come-go",function(a){$.EventFn(a);var n=$(this).parents("td").attr("data-email");t.showTab(Base.url+"/html/pop-come-go-emailOut.html?email="+n+"&v="+window.ver,"往来邮件")}),$(".page_info").on("click",".sender-condition",function(t){$.EventFn(t)}),$(".page_info").on("click","tbody>tr",function(a){$.EventFn(a);var n=$(this).find("input[name=batch]").attr("data-id"),e=$(this).find(".inboxContent").find("a").text(),i=$(this).attr("data-type");$.GetLength(e)>10&&(e=$.autoAddEllipsis(e,8)),"000"==i?t.showTab(Base.url+"/html/pop-email-newOut.html?showType=right&type=5&id="+n+"&v="+window.ver,e):t.showTab(Base.url+"/html/pop-email-detailOut.html?id="+n+"&uri=/api/email/outbox/v1/detail&v="+window.ver,e)}),$(".page_info").on("click",".btn-blockAdd",function(a){$.EventFn(a);var n=$(this).parents(".sender-condition").find(".sender-condition-name").text();t.showTab(Base.url+"/html/pop-contacts-add.html?name="+n+"&v="+window.ver,"添加联系人")}),$(".page_info").on("click",".btn-blockDetail",function(a){$.EventFn(a);var n=$(this).parents("li").attr("data-cont");t.showTab(Base.url+"/html/pop-relation-detail.html?id="+n+"&v="+window.ver,"联系人详情")}),$(".page_info").on("click",".company-name",function(a){$.EventFn(a);var n=$(this).parents("li").attr("data-customer");t.showTab(Base.url+"/html/pop-customer-detail.html?id="+n+"&v="+window.ver,"客户详情")}),$(".table").on("mouseenter",".mark-p",function(t){$.EventFn(t),$(this).find(".close-icon").show();var a=$(this).children(".close-icon");"none"==a.css("display")&&a.show()}),$(".table").on("mouseleave",".mark-p",function(t){$.EventFn(t),$(this).find(".close-icon").hide();var a=$(this).children(".close-icon");"block"==a.css("display")&&a.hide()}),$(".table").on("click",".close-icon",function(t){$.EventFn(t);var a=$(this).parent(),n=$(this).closest("li").attr("data-id"),e={id:n};$.ajax({url:Base.sitUrl+"/api/email/v1/tag/delete",type:"POST",dataType:"json",data:{data:JSON.stringify(e)},success:function(t){return t.success?void a.remove():void $.unLogin(t)}})}),$(".m_batch").on("click","#btn-dels",function(t){$.EventFn(t),$.Confirm("确认删除？","",function(){var t=i.getAllChecked().ids;i.deleteEmail(t),$(".m_batch").stop().animate({left:"-100%"},function(){$(this).removeClass("active")})})}),$(".m_batch").on("click",".mclose",function(t){$.EventFn(t),n()}),$("#delsModal").on("click","#btn-del-no",function(t){$.EventFn(t);i.getAllChecked().ids;n(),$(".m_batch").stop().animate({left:"-100%"},function(){$(this).removeClass("active")})}),$(".page_info").on("mouseenter",".sender-condition-td",function(t){$.EventFn(t),$(this).find(".sender-condition-style").show()}),$(".page_info").on("mouseleave",".sender-condition-td",function(t){$.EventFn(t),$(this).children(".sender-condition-style").hide()}),$(".page_info").on("click","tbody>tr",function(t){$.EventFn(t);var a=$(this).find("input[name=batch]").attr("data-id"),n=$(this).attr("isRead");0==n&&(i.isRead(a,1),$(this).attr("isRead","1").css("font-weight","400"))}),$(".page_info").on("click",">table>thead>tr>th",function(t){$.EventFn(t);var a=[];"sender"==$(this).attr("id")?(a=i.sortName.sort(function(t,a){return t.emailAddress.charCodeAt()-a.emailAddress.charCodeAt()}),i.shujuzhanshi(a,i.total)):"sortTime"==$(this).attr("id")&&("0"==$(this).attr("data-type")?(a=i.sortName.sort(function(t,a){return new Date(t.sendTime).getTime()-new Date(a.sendTime).getTime()}),$(this).attr("data-type","1"),i.shujuzhanshi(a,i.total)):(a=i.sortName.sort(function(t,a){return new Date(a.sendTime).getTime()-new Date(t.sendTime).getTime()}),$(this).attr("data-type","0"),i.shujuzhanshi(a,i.total)))}),$(".page-content").on("keyup","#inputQuick",function(t){if($.EventFn(t),"none"==$("#btn-underling-pop").css("display"))var a={filtrate:1,keyword:$("#inputQuick").val()||""};else var n=$("#btn-underling-pop").attr("data-id"),a={filtrate:1,keyword:$("#inputQuick").val()||"",id:n};13==event.keyCode&&(a.addressType!=-1||""!=a.emailTime||""!=a.keyword||""!=a.attachmentName?i.filter(a):i.filter())});var e={homepage:1,lastpage:null,currentPage:1,pageSize:20},i={lastpage:null,currentPage:1,sortName:[],total:0,page:{pageSize:e.pageSize,currentPage:e.currentPage},filter:function(t,a,n,s,o,l,d,c,r,u){var p={group:a||0,unread:n||0,star:s||0,deleted:o||0,spam:l||0,draft:d||0,tag:c||"",subject:r||"",content:u||"",currentPage:e.currentPage,pageSize:e.pageSize};t&&$.extend(p,t),$.ajax({data:{data:JSON.stringify(p)},type:"POST",url:Base.sitUrl+"/api/email/outbox/v1/search",beforeSend:function(t){$.BlockUI()},complete:function(t,a){$.UnblockUI()},success:function(t){if(!t.success)return void $.unLogin(t);var a=t.data.results;i.sortName=a,i.total=t.data.totalItem,i.shujuzhanshi(a,i.total)}})},draft:function(t,a,n,s,o,l,d,c,r,u){var p={group:0,unread:0,star:0,deleted:0,spam:0,draft:0,tag:"",subject:"",content:"",currentPage:e.currentPage,pageSize:e.pageSize};$.ajax({data:{data:JSON.stringify(p)},type:"POST",url:Base.sitUrl+"/api/email/draft/v1/search",beforeSend:function(t){$.BlockUI()},complete:function(t,a){$.UnblockUI()},success:function(t){if(!t.success)return void $.unLogin(t);var a=t.data.results,n="";return 0==a.length?(n='<tr><td colspan="6" style="text-align: center;">还没有草稿！</td></tr>',void $(".page_info>table>tbody").empty().append(n)):(i.sortName=a,i.total=t.data.totalItem,void i.shujuzhanshi(a,i.total,"000"))}})},shujuzhanshi:function(t,n,s){var o="",l="";if(t.length<=0)o='<tr><td colspan="6" style="text-align: center;">还没有收到邮件</td></tr>';else for(var d=0;d<t.length;d++){var c=t[d].hasAttachment,r=$.dateObj(new Date(t[d].sendTime).getTime())._getDatetime(),u=t[d].isStar,p=t[d].isRead,b="";1==c&&(b='<i class="pub-icon list-fujian-icon"></i>');var m="";if(null!=t[d].tags&&""!=t[d].tags)if(t[d].tags.length>2){for(var v=0;v<2;v++)m+='<li class="mark-p" style="margin-top:5px;margin-right:5px;color:#ff7200;border:1px solid #ff7200;border-radius:8px;" data-id="'+t[d].tags[v].id+'"><span class="mark ellipsis">'+t[d].tags[v].name+'</span><i class="pub-icon close-icon"></i></li>';$("#inboxContent>.marks-group").append(m)}else{for(var v=0;v<t[d].tags.length;v++)m+='<li class="mark-p" style="margin-top:5px;margin-right:5px;color:#ff7200;border:1px solid #ff7200;border-radius:8px;" data-id="'+t[d].tags[v].id+'"><span class="mark ellipsis">'+t[d].tags[v].name+'</span><i class="pub-icon close-icon"></i></li>';$("#inboxContent>.marks-group").append(m)}var g=t[d].content;if(g&&(g=t[d].content.replace(/</,"&lt;")),g.length>28&&t[d].subject.length>28?(t[d].subject=t[d].subject.substring(0,14)+"...",g=g.substring(0,14)+"..."):g.length>28?g=g.substring(0,27)+"...":t[d].subject.length>28&&(t[d].subject=t[d].subject.substring(0,27)+"..."),null!=t[d].visitingCard&&""!=t[d].visitingCard){var f=t[d].visitingCard.status,h=t[d].visitingCard.isHighSeas,y=t[d].visitingCard.customerName,k="",C="";if(1==h&&(C="<span>公海</span>"),null!==t[d].visitingCard.customerStatusName)var x=t[d].visitingCard.customerStatusName.substring(0,1);else var x="";switch(f){case 1:k='<i class="pub-icon sender4-icon"></i>',l='<ul><li data-id="'+t[d].id+'"><div class="sender-condition"><div class="sender-condition-img"><span class="ellipsis sender-condition-name">'+t[d].visitingCard.title+'</span></div><button type="button" class="btn btn-primary btn-lg btn-block btn-blockAdd">添加为联系人</button><div class="btn-group condition-cz-btn" role="group" style="margin-left:-118px;"><button type="button" class="btn btn-default newtongxunlu">添加通讯录</button><button type="button" class="btn btn-default fayoujian">发邮件</button><button type="button" class="btn btn-default come-go">往来邮件</button></div></div></li></ul>';break;case 2:k='<i class="pub-icon sender4-icon"></i>',l='<ul><li data-id="'+t[d].id+'"><div class="sender-condition"><div class="sender-condition-img"><span class="ellipsis sender-condition-name">'+t[d].visitingCard.title+'</span></div><button type="button" class="btn btn-primary btn-lg btn-block btn-blockAdd">添加为联系人</button><div class="btn-group condition-cz-btn" role="group" style="margin-left:-118px;"><button type="button" class="btn btn-default tongxunlu">通讯录好友</button><button type="button" class="btn btn-default fayoujian">发邮件</button><button type="button" class="btn btn-default come-go">往来邮件</button></div></div></li></ul>';break;case 3:k='<i class="pub-icon sender1-icon"></i>',l='<ul><li data-id="'+t[d].id+'" data-customer="'+t[d].visitingCard.customerId+'" data-cont="'+t[d].visitingCard.customerContactsId+'"><div class="sender-condition"><div class="sender-condition-img"><span class="ellipsis sender-condition-name">'+t[d].visitingCard.title+'</span></div><div class="company-info"><span class="s-status" style="background-color: '+t[d].visitingCard.customerStatusColour+';">'+x+'</span><span class="ellipsis company-name name-blue">'+y+'</span></div><div class="belong-yewuy"><label>所属业务员：</label><span>'+t[d].visitingCard.salesmanName+'</span></div><button type="button" class="btn btn-primary btn-lg btn-block btn-blockDetail">查看联系人</button><div class="btn-group condition-cz-btn" role="group"><button type="button" class="btn btn-default xiegenjin">写跟进</button><button type="button" class="btn btn-default fayoujian">发邮件</button><button type="button" class="btn btn-default come-go">往来邮件</button></div></div></li></ul>';break;case 4:k='<i class="pub-icon sender1-icon"></i>',l='<ul><li data-id="'+t[d].id+'" data-customer="'+t[d].visitingCard.customerId+'"><div class="sender-condition"><div class="sender-condition-img"><span class="ellipsis sender-condition-name">'+t[d].visitingCard.title+'</span></div><div class="company-info"><span class="s-status" style="background-color: '+t[d].visitingCard.customerStatusColour+';">'+x+'</span><span class="ellipsis company-name name-blue">'+y+'</span></div><div class="belong-yewuy"><label>所属业务员：</label><span>'+t[d].visitingCard.salesmanName+'</span></div><button type="button" class="btn btn-primary btn-lg btn-block btn-blockAdd">添加为联系人</button><div class="btn-group condition-cz-btn" role="group"><button type="button" class="btn btn-default xiegenjin" disabled>写跟进</button><button type="button" class="btn btn-default fayoujian">发邮件</button><button type="button" class="btn btn-default come-go">往来邮件</button></div></div></li></ul>';break;case 5:k='<i class="pub-icon sender3-icon"></i>',l='<ul><li data-id="'+t[d].id+'" data-customer="'+t[d].visitingCard.customerId+'"><div class="sender-condition"><div class="sender-condition-img"><i class="pub-icon sender3-icon" style="top:0;"></i><span class="ellipsis sender-condition-name">'+t[d].visitingCard.title+'</span></div><div class="company-info"><span class="s-status" style="background-color: '+t[d].visitingCard.customerStatusColour+';">'+x+'</span><span class="ellipsis company-name name-blue">'+y+'</span></div><div class="belong-yewuy"><label>所属业务员：</label>'+C+'</div><button type="button" class="btn btn-primary btn-lg btn-block btn-privateCont">添加到私海</button><div class="btn-group condition-cz-btn" role="group"><button type="button" class="btn btn-default xiegenjin" disabled>写跟进</button><button type="button" class="btn btn-default fayoujian">发邮件</button><button type="button" class="btn btn-default come-go">往来邮件</button></div></div></li></ul>';break;case 6:k='<i class="pub-icon sender3-icon"></i>',l='<ul><li data-id="'+t[d].id+'" data-customer="'+t[d].visitingCard.customerId+'"><div class="sender-condition"><div class="sender-condition-img"><i class="pub-icon sender3-icon" style="top:0;"></i><span class="ellipsis sender-condition-name">'+t[d].visitingCard.title+'</span></div><div class="company-info"><span class="s-status" style="background-color: '+t[d].visitingCard.customerStatusColour+';">'+x+'</span><span class="ellipsis company-name name-blue">'+y+'</span></div><div class="belong-yewuy"><label>所属业务员：</label>'+C+'</div><button type="button" class="btn btn-primary btn-lg btn-block btn-privateCust">添加到私海</button><div class="btn-group condition-cz-btn" role="group"><button type="button" class="btn btn-default xiegenjin" disabled>写跟进</button><button type="button" class="btn btn-default fayoujian">发邮件</button><button type="button" class="btn btn-default come-go">往来邮件</button></div></div></li></ul>';break;case 7:k='<i class="pub-icon sender2-icon"></i>',l='<ul><li data-id="'+t[d].id+'" data-customer="'+t[d].visitingCard.customerId+'"><div class="sender-condition"><div class="sender-condition-img"><i class="pub-icon sender2-icon" style="top:0;"></i><span class="ellipsis sender-condition-name">'+t[d].visitingCard.title+'</span></div><div class="company-info"><span class="s-status" style="background-color: '+t[d].visitingCard.customerStatusColour+';">'+x+'</span><span class="ellipsis company-name name-blue">'+y+'</span></div><div class="belong-yewuy"><label>所属业务员：</label><span>'+t[d].visitingCard.salesmanName+'</span></div><button type="button" class="btn btn-default btn-lg btn-block btn-blockDetail btn-gray" disabled>查看联系人</button><div class="btn-group condition-cz-btn" role="group"><button type="button" class="btn btn-default xiegenjin" disabled>写跟进</button><button type="button" class="btn btn-default fayoujian">发邮件</button><button type="button" class="btn btn-default come-go" disabled>往来邮件</button></div></div></li></ul>';break;case 8:k='<i class="pub-icon sender2-icon"></i>',l='<ul><li data-id="'+t[d].id+'" data-customer="'+t[d].visitingCard.customerId+'"><div class="sender-condition"><div class="sender-condition-img"><i class="pub-icon sender2-icon" style="top:0;"></i><span class="ellipsis sender-condition-name">'+t[d].visitingCard.title+'</span></div><div class="company-info"><span class="s-status" style="background-color: '+t[d].visitingCard.customerStatusColour+';">'+x+'</span><span class="ellipsis company-name name-blue">'+y+'</span></div><div class="belong-yewuy"><label>所属业务员：</label><span>'+t[d].visitingCard.salesmanName+'</span></div><button type="button" class="btn btn-default btn-lg btn-block btn-gray btn-blockAdd" disabled>添加联系人</button><div class="btn-group condition-cz-btn" role="group"><button type="button" class="btn btn-default xiegenjin" disabled>写跟进</button><button type="button" class="btn btn-default fayoujian">发邮件</button><button type="button" class="btn btn-default come-go" disabled>往来邮件</button></div></div></li></ul>';break;default:k='<i class="pub-icon sender2-icon"></i>',l=""}var w='<div class="sender-condition-style">'+l+"</div>",j='<a class="email-content-info ellipsis"href="pop-email-detail.html" data-maintab><span class="pull-left">'+b+t[d].subject+'<span style="margin:0 5px;">-</span></span><span class="list-content ellipsis">'+t[d].content+'</span></a><ul class="marks-group">'+m+"</ul>",S="";S=1==u?'<i class="pub-icon star stared-icon" data-id="'+t[d].id+'" data-value="1"></i>':'<i class="pub-icon star star-icon" data-id="'+t[d].id+'" data-value="0"></i>';var j='<a class="email-content-info ellipsis"href="pop-email-detail.html"data-maintab><span style="max-width:665px;" class="pull-left">'+b+t[d].subject+'<span style="margin:0 5px;">-</span></span><span class="list-content ellipsis">'+g+'</span></a><ul class="marks-group" style="display: inline-block;overflow: hidden;height: 25px;margin:0;float:right">'+m+"</ul>";o+=1==p?'<tr isRead="1" data-type='+s+'>                                        <td><div class="checker"><span><input type="checkbox" data-id="'+t[d].id+'" name="batch"></span></div></td>                                        <td class="sender-condition-td" data-email="'+t[d].emailAddress+'" data-count="0"><div class="sender">'+k+'<span class="span-name ellipsis">'+a(t[d].visitingCard.title)+"</span></div>"+w+'</td>                                        <td class="inboxContent">'+j+'</td>                                        <td><div class="inbox-time sortTime">'+r+"</div></td>                                        <td>"+S+"</td>                                    </tr>":'<tr isRead="0" style="font-weight:700;"  data-type='+s+' class="isRead">                                        <td><div class="checker"><span><input type="checkbox" data-id="'+t[d].id+'" name="batch"></span></div></td>                                        <td class="sender-condition-td" data-email="'+t[d].emailAddress+'" data-count="0"><div class="sender">'+k+'<span class="span-name ellipsis">'+a(t[d].visitingCard.title)+"</span></div>"+w+'</td>                                        <td class="inboxContent">'+j+'</td>                                        <td><div class="inbox-time sortTime">'+r+"</div></td>                                        <td>"+S+"</td>                                    </tr>"}else{var k='<i class="pub-icon sender2-icon"></i>',S="",j='<a class="email-content-info ellipsis"href="pop-email-detail.html"data-maintab><span style="max-width:665px;" class="pull-left">'+b+t[d].subject+'<span style="margin:0 5px;">-</span></span><span class="list-content ellipsis">'+g+'</span></a><ul class="marks-group" style="display: inline-block;overflow: hidden;height: 25px;margin:0;float:right">'+m+"</ul>";S=1==u?'<i class="pub-icon star stared-icon" data-id="'+t[d].id+'" data-value="1"></i>':'<i class="pub-icon star star-icon" data-id="'+t[d].id+'" data-value="0"></i>',o+=1==p?'<tr isRead="1" data-type='+s+'>                                        <td><div class="checker"><span><input type="checkbox" data-id="'+t[d].id+'" name="batch"></span></div></td>                                        <td class="sender-condition-td" data-email="'+t[d].emailAddress+'" data-count="0"><div class="sender">'+k+'<span class="span-name ellipsis">'+t[d].emailAddress+'</span></div></td>                                        <td class="inboxContent">'+j+'</td>                                        <td><div class="inbox-time sortTime">'+r+"</div></td>                                        <td>"+S+"</td>                                    </tr>":'<tr isRead="0" style="font-weight:700;" data-type='+s+' class="isRead">                                        <td><div class="checker"><span><input type="checkbox" data-id="'+t[d].id+'" name="batch"></span></div></td>                                        <td class="sender-condition-td" data-email="'+t[d].emailAddress+'" data-count="0"><div class="sender">'+k+'<span class="span-name ellipsis">'+t[d].emailAddress+'</span></div></td>                                        <td class="inboxContent">'+j+'</td>                                        <td><div class="inbox-time sortTime">'+r+"</div></td>                                        <td>"+S+"</td>                                    </tr>"}}$(".page_info>table>tbody").empty().append(o);var n=n,T=Math.ceil(n/e.pageSize);$.Page({total:n,_class:".page",nowNum:e.currentPage,allNum:T,callback:function(t,a){e.currentPage=t,i.draft()}})},deleteEmail:function(t){var a="/api/email/v1/draft/delete",n={ids:t},e="data="+JSON.stringify(n);$.ajax({url:Base.sitUrl+a,type:"POST",data:e,beforeSend:function(t){$.BlockUI()},complete:function(t,a){$.UnblockUI()},success:function(t){return t.success?void i.draft():void $.unLogin(t)}})},isRead:function(t,a){var n={ids:[t],value:a},e="data="+JSON.stringify(n);return $.ajax({url:Base.sitUrl+"/api/email/outbox/v1/read",type:"POST",data:e,success:function(t){if(!t.success)return void $.unLogin(t)}}),n},getAllChecked:function(){var t={ids:[],dist:"",del:"",arry:[]};i.currentData;return $("input[name=batch]:checked").each(function(){var a=$(this).attr("data-id");t.ids.push(parseInt(a)),t.dist+=$(this).attr("data-dist")+";",t.del+=$(this).attr("data-del")+";"}),t}};$.reHtml=function(t,a,n,s,o,l,d,c,r,u,p){if(t)var b={group:n||0,unread:s||0,star:o||0,deleted:l||0,spam:d||0,draft:c||0,tag:r||"",subject:u||"",content:p||"",currentPage:e.currentPage,pageSize:e.pageSize,id:t};else var b={group:n||0,unread:s||0,star:o||0,deleted:l||0,spam:d||0,draft:c||0,tag:r||"",subject:u||"",content:p||"",currentPage:e.currentPage,pageSize:e.pageSize};$.ajax({data:{data:JSON.stringify(b)},type:"POST",url:Base.sitUrl+"/api/email/outbox/v1/search",success:function(t){if(!t.success)return void $.unLogin(t);var a=t.data.results,n="";return 0==a.length?(n='<tr><td colspan="6" style="text-align: center;">还没有收到邮件</td></tr>',$(".page_info>table>tbody").empty(),void $(".page_info>table>tbody").append(n)):(i.sortName=a,i.total=t.data.totalItem,void i.shujuzhanshi(a,i.total))}})},$.reCaogao=function(t,a,n,s,o,l,d,c,r,u,p){var b={group:n||0,unread:s||0,star:o||0,deleted:l||0,spam:d||0,draft:c||0,tag:r||"",subject:u||"",content:p||"",currentPage:e.currentPage,pageSize:e.pageSize,id:t};a&&(b.filtrate=a.filtrate,b.addressType=a.addressType,b.adress=a.adress,b.keyword=a.keyword,b.attachmentName=a.attachmentName,b.emailTimeComparator=a.emailTimeComparator,b.emailTime=a.emailTime),$.ajax({data:{data:JSON.stringify(b)},type:"POST",url:Base.sitUrl+"/api/email/draft/v1/search",beforeSend:function(t){$.BlockUI()},complete:function(t,a){$.UnblockUI()},success:function(t){if(!t.success)return void $.unLogin(t);var a=t.data.results,n="";if(0==a.length)return n='<tr><td colspan="6" style="text-align: center;">还没有收到邮件</td></tr>',void $(".page_info>table>tbody").empty().append(n);i.sortName=a,i.total=t.data.totalItem;i.shujuzhanshi(a,i.total,"000")}})},$(".page-right").css({float:"left",width:"99%"}),i.draft()})});