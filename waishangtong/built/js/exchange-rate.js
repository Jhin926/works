require(["common"],function(){require(["maintab","angular","ZeroClipboard","ueditorLang","blockUI","jqform","ztree"],function(e,t){e.init();var s=angular.module("All",[]);s.controller("exchangeRateList",["$scope","$http",function(e,t){function s(){t({method:"post",url:Base.sitUrl+"/api/exchange/v1/convert",params:{data:JSON.stringify(e.data)}}).success(function(t){if(!t.success)return void $.Alert(t.message);e.results=t.data,e.left_rate=e.results.rate,e.results1=e.results.rate;var s=e.exchageMoney/e.results.toMoney;s=s.toFixed(6),e.results2=s,e.results1>0&&($(".left_results").html(e.results2),$(".right_results").html(e.results1)),$(".left_results").html(e.results1),$(".right_results").html(e.results2)})}function r(){t({method:"get",url:Base.sitUrl+"/api/exchange/v1/query",params:{data:JSON.stringify(e.pageObj)}}).success(function(t){if(!t.success)return void $.Alert(t.message);e.rateList=t.data.results;var s=t.data.totalItem,l=Math.ceil(t.data.totalItem/t.data.pageSize);$.Page({total:s,_class:".page",nowNum:e.pageObj.currentPage,allNum:l,callback:function(t,s){e.pageObj.currentPage=t,r()}})})}e.pageObj={homepage:1,currentPage:1,lastpage:null,pageSize:20,conditions:[],keyword:""},e.exchageMoney="",e.rateList={},e.infoList=[],e.exchangeList={},e.results=[],e.left_rate="",e.right_rate="",e.results1="",e.results2="",e.exchange=function(){$(".results").html(""),$(".left_results").html(""),$(".right_results").html("");var e=$(".left-select option:selected").text(),t=$(".right-select option:selected").text();e=e.substring(0,e.length-3),t=t.substring(0,t.length-3);var s=$(".left-select option:selected").val(),r=$(".right-select option:selected").val();$(".left-select option").attr("selected",!1),$(".left-select").find("option[value='"+r+"']").prop("selected",!0),$(".right-select option").attr("selected",!1),$(".right-select").find("option[value='"+s+"']").prop("selected",!0),$(".holding-money").html(t),$(".exchange-money").html(e),$(".left_rate").html(t),$(".right_rate").html(e)},e.show_right=function(e){$.EventFn(e),$(".page-left").animate({marginLeft:"-148px"}),$(".page-right").css({width:"100%",borderLeft:"none"}),$(".r_titles").show()},e.show_left=function(e){$.EventFn(e),$(".page-left").animate({marginLeft:"0px"}),$(".page-right").css({width:"88%",borderLeft:"10px solid #E6EAED"}),$(".r_titles").hide()},e.compute=function(){var t=e.exchageMoney,r=$(".left-select option:selected").text(),l=$(".right-select option:selected").text();return""==t?void $.Alert("请输入兑换金额"):(r=r.substring(r.length-3),l=l.substring(l.length-3),$(".exchange-rate-con").css("height","164px"),$(".exchange-rate-bottom").show(),e.data={from:r,to:l,money:t},void s())},r(),t({method:"get",url:Base.sitUrl+"/api/exchange/v1/list"}).success(function(t){return t.success?void(e.exchangeList=t.data):void $.Alert(t.message)})}]),angular.bootstrap(document.body,["All"])})});