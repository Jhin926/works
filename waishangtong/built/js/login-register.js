require(["common"],function(){require(["blockUI"],function(){function e(e){var e=JSON.stringify(e);$.ajax({url:Base.sitUrl+"/api/org/v1/org/user/register",type:"POST",data:{data:e},success:function(e){return e.success?void $.Alert("注册成功"):void $.unLogin(e)}})}$(".registerKind>a").bind("click",function(){$(this).removeClass("noactive").siblings("a").addClass("noactive");var e=$(this).index();0==e?($("#phone").show(),$("#email").hide()):1==e&&($("#email").show(),$("#phone").hide())}),$("#authCode").on("click",function(){var e="重新发送(<span>180</span>)";$(this).attr("disabled",!0).text("").empty().append(e),$.time=function(){if(parseInt($("#authCode span").text())>1)$("#authCode span").text(parseInt($("#authCode span").text())-1);else{clearInterval();var e="重新发送";$("#authCode").text("").empty().append(e),$("#authCode").attr("disabled",!1)}},setInterval("$.time()",1e3)});var r=/^[a-zA-Z]{1}[0-9a-zA-Z_]{6,12}$/,i=/^[a-zA-Z]{1}[0-9a-zA-Z_]{6,12}$/;$("#phone").find("input[name=mobile]").bind("change",function(){var e=$(this).val();/^1[34578]\d{9}$/.test(e)?($(this).removeClass("errorVal"),$(this).parents(".form-group").find(".error").hide(),$("#authCode").prop("disabled",!1)):($(this).addClass("errorVal"),$(this).parents(".form-group").find(".error").show(),$("#authCode").prop("disabled",!0))}),$("input[name=name]").bind("change",function(){var e=$(this).val();r.test(e)?($(this).removeClass("errorVal"),$(this).parents(".form-group").find(".error").hide()):($(this).addClass("errorVal"),$(this).parents(".form-group").find(".error").show())}),$("input[name=password]").bind("change",function(){var e=$(this).val();r.test(e)?($(this).removeClass("errorVal"),$(this).parents(".form-group").find(".error").hide()):($(this).addClass("errorVal"),$(this).parents(".form-group").find(".error").show())}),$("#authCode").prop("disabled",!0),$("#phoneBtn").on("click",function(){var t=$("#phone").find("input[name=name]").val(),n=$("#phone").find("input[name=mobile]").val(),a=$("#phone").find("input[name=verify]").val(),o=$("#phone").find("input[name=password]").val(),s=$("#phone").find("input[name=passwordConfirm]").val();if(""==t)return void $.Alert("请填写您的用户名");if(!r.test(t))return void $.Alert("您填写的用户名不符合规则");if(""==a)return void $.Alert("请填写验证码");if(""==n)return $.Alert("请填写您的手机号"),void $("#authCode").prop("disabled",!0);if(isNaN(n)||11!==n.length)return void $.Alert("请正确填写您的手机号");if(""==o)return void $.Alert("请填写您的密码");if(!i.test(o))return void $.Alert("请正确填写您的密码");if(""==s)return void $.Alert("请确认您的密码");if(o!==s)return void $.Alert("两次密码不一致");var d={name:t,verify:a,mobile:n,password:o,passwordConfirm:s,verifyType:1};e(d)}),$("#emailBtn").bind("click",function(){var t=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,n=$("#email").find("input[name=name]").val(),a=$("#email").find("input[name=email]").val(),o=$("#email").find("input[name=password]").val(),s=$("#email").find("input[name=passwordConfirm]").val();if(""==n)return void $.Alert("请填写您的用户名");if(!r.test(n))return void $.Alert("您填写的用户名不符合规则");if(""==a)return void $.Alert("请填写您的邮箱");if(!t.test(a))return void $.Alert("请填写正确填写您的邮箱");if(""==o)return void $.Alert("请填写您的密码");if(!i.test(o))return void $.Alert("请正确填写您的密码");if(""==s)return void $.Alert("请确认您的密码");if(o!==s)return void $.Alert("两次密码不一致");var d={name:n,email:a,password:o,passwordConfirm:s,verifyType:0};e(d)})})});