require(["common"],function(){require(["ztree","maintab","setpassword","validationLang","rsa"],function(e,a,n){function t(e,a,n){n.cusFiled=n.checked?1:0,$.AjaxFun({data:{_mt:"userSecurity_editRole",roleEntity:JSON.stringify(n)},success:function(e){console.log(e)}})}function i(e,a){console.log(a)}function c(e,a){var e=e||1;$.AjaxFun({data:{_mt:"userSecurity_getRoleCategoriesAndAllCate",roleId:e,pCateId:-1},success:function(e){var a=e.data;$.each(a,function(e,a){a.checked=1==a.cusFiled,a.isParent=0==a.isLeaf}),$.fn.zTree.init(s,o,a)}})}a.init();var r=$("#rolesList"),s=$("#roleTree");$.BlockUI(),$.AjaxFun({data:{_mt:"userSecurity_getRoles"},success:function(e){var a="";$.each(e.data,function(e,n){a+='<li><a data-roleId="'+n.id+'" href="#">'+n.name+"</a></li>"}),r.append(a).find("li:first").addClass("current"),$.UnblockUI()}});var o={callback:{beforeExpand:i,onCheck:t},check:{enable:!0},data:{simpleData:{enable:!0}}};r.on("click","li>a",function(){var e=$(this).data("roleid");return $(this).parent("li").addClass("current").siblings("li").removeClass("current"),c(e),!1}),c()})});