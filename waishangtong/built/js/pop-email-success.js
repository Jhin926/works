require(["common"],function(){require(["maintab","blockUI","ztree"],function(t){function a(t){var a={value:t};$.ajax({url:Base.sitUrl+"/api/email/v1/visitingcards",type:"POST",data:{data:JSON.stringify(a)},success:function(t){for(var a=t.data,s="",i=0;i<a.length;i++){var l=a[i].status;s+=1==l?'<li>\t\t\t\t                        <span class="email-success-title">'+a[i].email+'</span>\t\t\t\t                        <div class="card-btn-group" style="">\t\t\t\t                            <a href="#" class="btn-blockAdd">添加为联系人</a>\t\t\t\t                            <span>|</span>\t\t\t\t                            <a href="#" class="newtongxunlu">添加到通讯录</a>\t\t\t\t                            <span>|</span>\t\t\t\t                            <a href="#" class="come-go">来往邮件</a>\t\t\t\t                        </div>\t\t\t\t                    </li>':1==l?'<li>\t\t\t\t                        <span class="email-success-title">'+a[i].email+'</span>\t\t\t\t                        <div class="card-btn-group" style="display:inline-block;float:right;margin-right:200px">\t\t\t\t                            <a href="#" class="btn-blockAdd">添加为联系人</a>\t\t\t\t                            <span>|</span>\t\t\t\t                            <a href="#" class="disabled">添加到通讯录</a>\t\t\t\t                            <span>|</span>\t\t\t\t                            <a href="#" class="come-go">来往邮件</a>\t\t\t\t                        </div>\t\t\t\t                    </li>':'<li>\t\t\t\t                        <span class="email-success-title">'+a[i].email+'</span>\t\t\t\t                        <div class="card-btn-group" style="display:inline-block;float:right;margin-right:200px">\t\t\t\t                            <a href="#" class="disabled">添加为联系人</a>\t\t\t\t                            <span>|</span>\t\t\t\t                            <a href="#" class="disabled">添加到通讯录</a>\t\t\t\t                            <span>|</span>\t\t\t\t                            <a href="#" class="come-go">来往邮件</a>\t\t\t\t                        </div>\t\t\t\t                    </li>'}$(".email-list").empty().append(s)}})}var s=$.GetQueryString("id"),i=$.GetQueryString("email");t.init(),$("#email-detail").click(function(){t.showTab(Base.sitUrl+"/html/pop-email-detailOut.html?id="+s+"&v="+window.ver,"邮件详情")}),$(".email-list").on("click",".newtongxunlu",function(a){$.EventFn(a);var s=$(this).parents("li").find(".email-success-title").text();t.showTab(Base.url+"/html/pop-statistics-new.html?name="+s+"&v="+window.ver,"新建通讯录")}),$(".email-list").on("click",".btn-blockAdd",function(a){$.EventFn(a);var s=$(this).parents("li").find(".email-success-title").text();t.showTab(Base.url+"/html/pop-contacts-add.html?name="+s+"&v="+window.ver,"添加联系人")}),$(".email-list").on("click",".come-go",function(a){$.EventFn(a);var s=$(this).parents("li").find(".email-success-title").text();t.showTab(Base.url+"/html/pop-come-go-email.html?email="+s+"&v="+window.ver,"往来邮件")}),a(i)})});