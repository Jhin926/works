require(["common"],function(){require(["maintab"],function(t){function a(){for(var t=new Date,a=t.getFullYear(),e=(t.getMonth(),""),r="",i=2e3;i<=a;i++)e+="<option value="+i+">"+i+"年</option>";for(var i=1;i<13;i++)r+='<option value="'+i+'">'+i+"月</option>";$("#years").empty(),$("#years").append(e),$("#years").find("option[value="+a+"]").attr("selected",!0),$("#month").empty(),$("#month").append('<option value="19">全部</option>'),$("#month").append(r)}function e(t,a){var t=t.toString(),e=i.currentPage.toString(),r=i.pageSize.toString(),n={year:t,subyear:a,currentPage:e,pageSize:r};$.ajax({url:Base.sitUrl+"/api/org/v1/org/user/subordinate/statistics",type:"POST",dataType:"json",data:{data:JSON.stringify(n)},success:function(t){if(!t.success)return void $.unLogin(t);for(var a=t.data.results,e="",r=0;r<a.length;r++)e+='<tr data-id="'+r+'"><td>'+a[r].staffName+"</td><td>"+a[r].loginTimes+"</td><td>"+a[r].emailCount+"</td><td>"+a[r].edmCount+"</td><td>"+a[r].newCustomerCount+"</td><td>"+a[r].quotationCount+"</td><td>"+a[r].orderCount+"</td><td>"+a[r].orderMoney+"</td></tr>";$(".table tbody").empty().append(e);var n=t.data.totalItem,s=n,d=i.pageSize,o=Math.ceil(s/d);if(i.lastpage=o,o>1){var l="";l='<li><a href="javascript:;" data-page="1">&laquo;</a></li>';for(var u=0;u<o;u++)l+='<li><a href="javascript:;" data-page="'+(u+1)+'">'+(u+1)+"</a></li>";l+='<li><a href="javascript:;" data-page="'+i.lastpage+'">&raquo;</a></li>'}$("#pagination").empty(),$("#pagination").append(l),$(".i-content-wrapper").stop().animate({scrollTop:0},500),void 0==i.currentPage||1==i.currentPage?($("#pagination").children().eq(1).addClass("active"),$("#pagination").children().first().addClass("disabled").hide().children().last().removeClass("disabled").show()):i.currentPage&&i.currentPage==o?($("#pagination").children().eq(i.currentPage).addClass("active").siblings().removeClass("active"),$("#pagination").children().last().addClass("disabled").hide().children().first().removeClass("disabled").show()):i.currentPage&&i.currentPage>1&&i.currentPage<o&&$("#pagination").children().eq(i.currentPage).addClass("active").siblings().removeClass("active")}})}var r=$(".page-content"),i={homepage:1,currentPage:1,lastpage:null,pageSize:10};r.on("click","#pagination>li",function(t){var a=t||window.event;a.preventDefault(),$(this).hasClass("active")||$(this).hasClass("disabled")||(i.currentPage=parseInt($(this).children().attr("data-page")),quoObj.filter(),$(this).addClass("active").siblings().removeClass("active"))});var n=(new Date).getFullYear();e(n,"19"),a(),$("#years").on("change",function(){var t=$(this).val(),a=$("#month").val();e(t,a)}),$("#month").on("change",function(){var t=$(this).val(),a=$("#years").val();e(a,t)}),$(document).ready(function(){$(".table thead th").unbind("click").on("click",function(t){function a(t,a){return t-a}$.EventFn(t);var e=new Array,r=$(".table tbody tr"),i="";if("sendNum"==$(this).attr("id"))var n=3;else if("saleNum"==$(this).attr("id"))var n=4;else if("custNum"==$(this).attr("id"))var n=5;else if("quoteNum"==$(this).attr("id"))var n=6;else if("orderNum"==$(this).attr("id"))var n=7;else{if("orderMoney"!=$(this).attr("id"))return;var n=8}for(var s=0;s<r.length;s++)i+=$(".table tbody tr").eq(s).find("td:nth-child("+n+")").text()+"."+$(".table tbody tr").eq(s).attr("data-id")+",";i=i.substring(0,i.length-1),e=i.split(","),e=e.sort(a);var d;if($(this).hasClass("up")){$(this).removeClass("up"),$(this).find(".i-jiantou").css("transform","rotate(0deg)");for(var o=r.length,s=0;s<o;s++)for(var l=0;l<o;l++){var u=o-s,c=e[s].substring(e[s].search(/\./)+1,e[s].length);$(".table tbody tr").eq(l).attr("data-id")==c&&(d+='<tr data-id="'+$(".table tbody tr").eq(l).attr("data-id")+'">'+$(".table tbody tr").eq(l).html()+"</tr>")}$(".table tbody").empty(),$(".table tbody").append(d)}else{$(this).addClass("up"),$(this).find(".i-jiantou").css("transform","rotate(180deg)");for(var o=r.length,s=0;s<o;s++)for(var l=0;l<o;l++){var u=o-s,c=e[u-1].substring(e[u-1].search(/\./)+1,e[u-1].length);$(".table tbody tr").eq(l).attr("data-id")==c&&(d+='<tr data-id="'+$(".table tbody tr").eq(l).attr("data-id")+'">'+$(".table tbody tr").eq(l).html()+"</tr>")}$(".table tbody").empty(),$(".table tbody").append(d)}})})})});